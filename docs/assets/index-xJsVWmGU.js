(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const a of o.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function i(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=i(s);fetch(s.href,o)}})();class p{constructor(e,i){this.x=e,this.y=i,this.width=20,this.height=20,this.velocity=0}jump(){this.velocity=-10}update(e){this.velocity+=e,this.y+=this.velocity}draw(e){e.fillStyle="#FF0000",e.fillRect(this.x,this.y,this.width,this.height)}isOutOfBounds(e){return this.y<0||this.y+this.height>e}}function g(t,e,i){if(i<e)throw new Error("max must be greater than or equal to min");const r=i-e+1;if(t&&typeof t.nextInt=="function")return t.nextInt(e,i);const s=typeof t=="function"?t():t&&typeof t.next=="function"?t.next():Math.random();return Math.floor(s*r)+e}class m{constructor(e,i,r,s=Math.random){this.x=e,this.width=50,this.gapSize=r,this.canvasHeight=i,this.passed=!1;const o=50,a=Math.max(o,i-r-o);this.topHeight=g(s,o,a)}update(e,i,r,s){this.x-=e;const o=i.x<this.x+this.width&&i.x+i.width>this.x,a=i.y<this.topHeight,l=i.y+i.height>this.topHeight+this.gapSize;o&&(a||l)&&r(),!this.passed&&i.x>this.x+this.width&&(this.passed=!0,s())}draw(e){e.fillStyle="#00FF00",e.fillRect(this.x,0,this.width,this.topHeight);const i=this.topHeight+this.gapSize,r=this.canvasHeight-i;e.fillRect(this.x,i,this.width,r)}isOffScreen(){return this.x+this.width<0}}const c="flappy-bird/prng-seed";function d(t){return t||(typeof window<"u"&&typeof window.localStorage<"u"?window.localStorage:null)}class y{constructor(e=Date.now(),i=c){this.storageKey=i,this.initialSeed=0,this.state=0,this.seed(e)}seed(e){const i=e>>>0;return this.initialSeed=i,this.state=i,this.initialSeed}reset(){this.state=this.initialSeed}next(){this.state=this.state+1831565813>>>0;let e=this.state;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}nextInt(e,i){if(i<e)throw new Error("max must be greater than or equal to min");const r=i-e+1;return Math.floor(this.next()*r)+e}getSeed(){return this.initialSeed}serializeSeed(){return this.initialSeed.toString(10)}saveSeed(e){const i=d(e);i&&i.setItem(this.storageKey,this.serializeSeed())}loadSeed(e){const i=d(e);if(!i)return!1;const r=i.getItem(this.storageKey);if(r===null)return!1;const s=Number.parseInt(r,10);return Number.isNaN(s)?!1:(this.seed(s),!0)}}function w(t={}){const{seed:e=Date.now(),storageKey:i=c,storage:r=void 0,autoLoad:s=!0,autoSave:o=!0}=t,a=new y(e,i),l=d(r);return!(s?a.loadSeed(l):!1)&&o&&l&&a.saveSeed(l),a}const h={gravity:.6,gapSize:100,pipeInterval:120,initialPipeSpeed:2};function S(t,e=w()){return{canvas:t,ctx:t.getContext("2d"),bird:null,pipes:[],score:0,gameOver:!1,frameCount:0,pipeSpeed:h.initialPipeSpeed,animationFrameId:null,prng:e}}function v(t){t.pipes=[],t.score=0,t.gameOver=!1,t.frameCount=0,t.pipeSpeed=h.initialPipeSpeed,t.animationFrameId=null,t.prng&&typeof t.prng.reset=="function"&&t.prng.reset()}let n;function u(t){n.pipes.push(new m(t,n.canvas.height,h.gapSize,n.prng))}function x(){n.animationFrameId!==null&&(cancelAnimationFrame(n.animationFrameId),n.animationFrameId=null),v(n),n.bird=new p(50,n.canvas.height/2),u(n.canvas.width),f()}function f(){n.animationFrameId=null;const{ctx:t,canvas:e}=n;t.clearRect(0,0,e.width,e.height),n.bird.update(h.gravity),n.bird.draw(t);for(let i=n.pipes.length-1;i>=0;i-=1){const r=n.pipes[i];r.update(n.pipeSpeed,n.bird,()=>{n.gameOver=!0},()=>{n.score+=1,n.score>0&&n.score%100===0&&(n.pipeSpeed+=.5)}),r.draw(t),r.isOffScreen()&&n.pipes.splice(i,1)}n.frameCount%h.pipeInterval===0&&u(e.width),t.fillStyle="#000",t.font="20px Arial",t.fillText(`Score: ${n.score}`,10,30),n.bird.isOutOfBounds(e.height)&&(n.gameOver=!0),n.gameOver?(t.fillStyle="#000",t.font="30px Arial",t.fillText("Game Over",e.width/2-80,e.height/2),t.fillText("Click to play again",e.width/2-100,e.height/2+40)):(n.frameCount+=1,n.animationFrameId=requestAnimationFrame(f))}function O(){n.gameOver?x():n.bird.jump()}function I(){const t=document.getElementById("gameCanvas"),e=S(t);initializeGameLoop(e),t.addEventListener("click",O)}window.addEventListener("DOMContentLoaded",I);
