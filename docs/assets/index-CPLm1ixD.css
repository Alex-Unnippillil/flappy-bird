:root{--z-background: 0;--z-game-canvas: 0;--z-hud: 10;--z-overlay: 20;--z-tooltip: 30;--z-modal: 40}:root{color-scheme:light;--hud-bg: rgba(255, 255, 255, .75);--hud-border: rgba(0, 0, 0, .08);--hud-text: #0b1f33;--accent: #ff9f1c;--button-bg: #2563eb;--button-text: #ffffff;--danger-blink-duration: 1.1s;font-family:Inter,Segoe UI,system-ui,sans-serif}*{box-sizing:border-box}.is-hidden{display:none!important}body{margin:0;min-height:100vh;background:linear-gradient(180deg,#89cff0,#d0f4f4 60%,#f9f9f9);display:flex;align-items:center;justify-content:center;padding:clamp(16px,4vw,32px);color:var(--hud-text);-webkit-user-select:none;user-select:none}.game-layout{width:min(960px,100%);display:grid;grid-template-columns:minmax(0,1fr);gap:clamp(16px,3vw,24px);align-items:start}@media (min-width: 960px){.game-layout{grid-template-columns:minmax(0,320px) minmax(0,1fr);align-items:stretch}}.hud-panel{position:relative;z-index:var(--z-hud);-webkit-backdrop-filter:blur(12px);backdrop-filter:blur(12px);background:var(--hud-bg);border:1px solid var(--hud-border);border-radius:18px;padding:clamp(14px,2.5vw,20px) clamp(16px,3vw,24px);display:flex;flex-wrap:wrap;gap:clamp(12px,2.5vw,20px);justify-content:center;box-shadow:0 12px 30px #0f172a1f;contain:layout paint}.hud-metric{display:flex;flex-direction:column;gap:4px;min-width:96px}.hud-metric--wide{flex:1 1 160px}.danger-blink{position:relative;isolation:isolate;--danger-blink-intensity: 0;--danger-blink-color: rgba(239, 68, 68, 1);--danger-blink-glow-radius: clamp(18px, 6vw, 40px)}.danger-blink:after{content:"";position:absolute;inset:calc(var(--danger-blink-glow-radius) * -.45);border-radius:inherit;pointer-events:none;background:radial-gradient(circle,var(--danger-blink-color) 0%,transparent 70%);opacity:calc(var(--danger-blink-intensity) * .85);animation:danger-blink var(--danger-blink-duration) ease-in-out infinite}@keyframes danger-blink{0%,to{opacity:calc(var(--danger-blink-intensity) * .2)}50%{opacity:calc(var(--danger-blink-intensity) * 1)}}.danger-blink--none{--danger-blink-color: rgba(59, 130, 246, 0)}.danger-blink--low{--danger-blink-color: rgba(250, 204, 21, .9)}.danger-blink--medium{--danger-blink-color: rgba(249, 115, 22, .92)}.danger-blink--high{--danger-blink-color: rgba(239, 68, 68, .95)}.danger-blink--critical{--danger-blink-color: rgba(220, 38, 38, 1)}.hud-label{font-size:.75rem;text-transform:uppercase;letter-spacing:.08em;color:#0b1f33b3}.hud-value{font-size:2rem;font-weight:700}.hud-metric--perfect{flex:1 1 120px}.perfect-indicator{position:relative;display:flex;align-items:center;gap:6px;min-height:32px}.perfect-indicator__badge{display:inline-flex;align-items:center;justify-content:center;min-width:28px;height:28px;padding:0 6px;border-radius:999px;background:#22c55e2e;color:#047857;font-size:1rem;font-weight:700;letter-spacing:.02em;box-shadow:inset 0 0 0 1px #0478571f;opacity:0;transform:translateY(8px) scale(.7)}.perfect-indicator__badge--active{animation:perfect-indicator-pop calc(16 * 1s / 24) steps(16,end) forwards}@keyframes perfect-indicator-pop{0%{opacity:0;transform:translateY(8px) scale(.7)}20%{opacity:1;transform:translateY(-2px) scale(1.08)}60%{opacity:1;transform:translateY(0) scale(1)}to{opacity:0;transform:translateY(-6px) scale(.92)}}@media (prefers-reduced-motion: reduce){.perfect-indicator__badge--active{animation:perfect-indicator-fade .25s steps(6,end) forwards}}@keyframes perfect-indicator-fade{0%{opacity:0}to{opacity:1}}.perfect-indicator__sr{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0 0 0 0);white-space:nowrap;border:0}@media (min-resolution: 1.25dppx) and (max-resolution: 3dppx){.hud-panel,.hud-panel *{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;text-rendering:optimizeLegibility}}.speed-meter{position:relative;width:100%;height:12px;border-radius:999px;background:#0f172a1f;overflow:hidden}.speed-meter__fill{position:absolute;top:0;right:0;bottom:0;left:0;width:0;background:linear-gradient(90deg,#22c55e,#facc15,#ef4444);transition:width .25s ease-out;will-change:width;transform:translateZ(0)}.game-stage{position:relative;display:flex;align-items:center;justify-content:center;background:#ffffffa6;border-radius:24px;padding:clamp(12px,5vw,28px);box-shadow:0 30px 60px #0f172a2e}#gameCanvas{position:relative;z-index:var(--z-game-canvas);width:min(540px,100%);aspect-ratio:26 / 40;max-height:min(85vh,720px);border-radius:18px;outline:none;background:transparent;box-shadow:inset 0 0 0 1px #0f172a14}#gameCanvas:focus-visible{box-shadow:0 0 0 4px #2563eb4d,inset 0 0 0 1px #2563eb99}.game-overlay{position:absolute;top:0;right:0;bottom:0;left:0;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:clamp(12px,3vw,20px);background:radial-gradient(circle at 50% 30%,#ffffffd1,#ffffff73);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);border-radius:18px;text-align:center;padding:clamp(20px,6vw,32px);transition:opacity .3s ease;will-change:opacity;contain:layout paint;z-index:var(--z-overlay)}.game-overlay.is-hidden{opacity:0;pointer-events:none}.hud-root{position:absolute;top:0;right:0;bottom:0;left:0;pointer-events:none;z-index:20}.hud-layer{width:100%;height:100%;pointer-events:none}.hud-layer--modal{display:flex;align-items:center;justify-content:center}.pause-menu{pointer-events:auto;min-width:min(320px,90%);max-width:min(440px,90%);background:#0f172ae6;color:#f8fafc;border-radius:24px;padding:28px clamp(24px,5vw,36px);box-shadow:0 24px 48px #0f172a73;text-align:center;display:flex;flex-direction:column;gap:18px}.pause-menu[hidden]{display:none}.pause-menu__title{font-size:clamp(1.5rem,2.4vw,2rem);margin:0}.pause-menu__description{margin:0;font-size:clamp(.95rem,2vw,1.05rem);color:#e2e8f0d9}.pause-menu__actions{display:flex;flex-direction:column;gap:12px}.pause-menu__button{width:100%;justify-content:center}.pause-menu__button[aria-pressed=true]{background:#2563eb73}.game-message{font-size:clamp(1.25rem,2vw,1.75rem);margin:0}.game-button{background:var(--button-bg);color:var(--button-text);border:none;border-radius:999px;padding:clamp(10px,2.5vw,14px) clamp(24px,6vw,36px);font-size:1rem;font-weight:600;letter-spacing:.02em;cursor:pointer;box-shadow:0 12px 24px #2563eb47;transition:transform .2s ease,box-shadow .2s ease;will-change:transform;touch-action:manipulation}.game-button:hover,.game-button:focus-visible{transform:translateY(-2px);box-shadow:0 16px 28px #2563eb5c}.game-footer{grid-column:1 / -1;text-align:center;font-size:.95rem;background:var(--hud-bg);border:1px solid var(--hud-border);border-radius:16px;padding:clamp(10px,2vw,16px) clamp(14px,3vw,24px);box-shadow:0 12px 24px #0f172a14}.hud-panel,.hud-panel *:not(input):not(textarea),.game-stage,.game-overlay,.game-footer{-webkit-user-select:none;user-select:none}kbd{background:#0f172ae6;color:#fff;padding:2px 8px;border-radius:6px;font-size:.85em;box-shadow:inset 0 -2px #ffffff2e}@media (max-width: 768px){body{padding:16px}.game-layout{grid-template-columns:1fr}.game-stage{padding:clamp(8px,8vw,24px)}#gameCanvas{width:min(100%,92vw);height:calc(min(100%,92vw)*1.5238)}}@media (prefers-reduced-motion: reduce){*{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important;scroll-behavior:auto!important}.danger-blink:after{animation:none!important;opacity:calc(var(--danger-blink-intensity) * .55)}}.game-over-title{display:flex;flex-direction:column;align-items:center;gap:8px;text-transform:uppercase;letter-spacing:.08em;color:var(--hud-text)}.game-over-title__eyebrow{font-size:.75rem;font-weight:600;letter-spacing:.2em;text-transform:uppercase;color:#0b1f33a3}.game-over-title__heading{margin:0;font-size:clamp(2.25rem,4.5vw,3rem);font-weight:800;line-height:1;letter-spacing:.06em;text-transform:uppercase;color:var(--hud-text);text-shadow:0 16px 40px rgba(15,23,42,.25),0 8px 20px rgba(15,23,42,.18)}.game-over-title__accent{color:var(--accent);text-shadow:0 12px 32px rgba(255,159,28,.3),0 2px 8px rgba(255,159,28,.6)}.game-over-title[hidden]{display:none!important}.medal-banner-layer{position:absolute;top:clamp(12px,5vw,28px);left:50%;transform:translate(-50%);display:flex;justify-content:center;width:min(92vw,420px);pointer-events:none;z-index:40}.medal-banner{display:grid;grid-template-columns:auto 1fr;align-items:center;gap:12px;padding:14px 20px;border-radius:999px;background:#ffffffeb;box-shadow:0 18px 40px #0f172a47;border:1px solid rgba(15,23,42,.1);color:#0b1f33;opacity:0;transform:translateY(-12px) scale(.96);transition:opacity .4s ease,transform .4s ease;pointer-events:auto}.medal-banner.is-active{opacity:1;transform:translateY(0) scale(1)}.medal-banner__emblem{width:48px;height:48px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:1.5rem;font-weight:700;color:#0b1f33;background:linear-gradient(135deg,#fffffff2,#fff9);box-shadow:inset 0 0 0 2px #fff9}.medal-banner__copy{display:flex;flex-direction:column;gap:4px}.medal-banner__title{font-size:1.1rem;letter-spacing:.01em}.medal-banner__description{font-size:.85rem;opacity:.8}.medal-banner--bronze .medal-banner__emblem{background:linear-gradient(135deg,#f7b267,#f4845f)}.medal-banner--silver .medal-banner__emblem{background:linear-gradient(135deg,#f5f7fa,#c7d2fe)}.medal-banner--gold .medal-banner__emblem{background:linear-gradient(135deg,#facc15,#f97316)}.medal-banner--platinum .medal-banner__emblem{background:linear-gradient(135deg,#e0f2fe,#a855f7)}@media (max-width: 600px){.medal-banner{padding:12px 16px;gap:10px}.medal-banner__emblem{width:40px;height:40px;font-size:1.25rem}}@media (prefers-reduced-motion: reduce){.medal-banner,.medal-banner.is-active{transition-duration:.01ms!important;transform:none!important}}.best-ribbon{position:fixed;top:1.25rem;right:1.25rem;display:flex;align-items:center;gap:.75rem;padding:.65rem 1rem;border-radius:999px;background:linear-gradient(135deg,#fffbf0,#ffe4a5);color:#512800;font-family:Inter,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,sans-serif;font-size:.95rem;font-weight:600;box-shadow:0 18px 38px #00000029;pointer-events:none;opacity:0;transform:translate3d(110%,0,0);transition:transform .24s ease-out,opacity .22s ease-out;z-index:40}.best-ribbon__badge{display:inline-flex;width:2.25rem;height:2.25rem;align-items:center;justify-content:center;border-radius:999px;background:linear-gradient(135deg,#ffce64,#ffb13d);font-size:1.35rem;box-shadow:inset 0 2px 4px #ffffffa6;animation:best-ribbon-pop .48s ease-out both}.best-ribbon__content{display:flex;flex-direction:column;line-height:1.1}.best-ribbon__title{font-size:.7rem;text-transform:uppercase;letter-spacing:.08em;color:#321e00b3}.best-ribbon__value{font-size:1.4rem;line-height:1.05}.best-ribbon__status{font-size:.75rem;color:#321e00b8}.best-ribbon--visible{opacity:1;transform:translateZ(0)}.best-ribbon[data-state=beat] .best-ribbon__badge{animation-name:best-ribbon-pop,best-ribbon-glow}@keyframes best-ribbon-pop{0%{transform:scale(.75)}70%{transform:scale(1.12)}to{transform:scale(1)}}@keyframes best-ribbon-glow{0%{box-shadow:0 0 #ffa800cc}70%{box-shadow:0 0 24px #ffc148cc}to{box-shadow:0 0 #ffa80066}}@media (max-width: 600px){.best-ribbon{top:auto;bottom:1rem;right:50%;transform:translate3d(50%,150%,0);padding:.6rem .9rem}.best-ribbon--visible{transform:translate3d(50%,0,0)}}@media (prefers-reduced-motion: reduce){.best-ribbon,.best-ribbon__badge{animation:none!important;transition:none}}.final-score{width:min(360px,100%);margin-inline:auto;padding:1.25rem 1.5rem;border-radius:1.25rem;background:linear-gradient(180deg,#0f172ac7,#0f172a9e);border:1px solid rgba(255,255,255,.18);box-shadow:0 24px 48px #0f172a59,0 0 0 1px #0f172a66;color:#f8fafc;text-align:center}.final-score[hidden]{display:none}.final-score__title{margin:0;font-size:1.1rem;text-transform:uppercase;letter-spacing:.18em;color:#f8fafceb}.final-score__metrics{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem;margin-top:1rem}.final-score__metric{display:flex;flex-direction:column;gap:.35rem;align-items:center}.final-score__label{font-size:.75rem;text-transform:uppercase;letter-spacing:.1em;color:#f8fafcb8}.final-score__value{font-size:clamp(1.85rem,4.5vw,2.6rem);font-weight:700;letter-spacing:.04em;color:#fff;text-shadow:0 0 2px rgba(0,0,0,.55),0 0 6px rgba(0,0,0,.45),0 0 16px rgba(0,0,0,.35);-webkit-text-stroke:1px rgba(0,0,0,.35)}.final-score__badge{margin-top:1rem;display:inline-flex;align-items:center;justify-content:center;padding:.35rem .85rem;border-radius:999px;font-weight:600;font-size:.9rem;letter-spacing:.05em;background:linear-gradient(90deg,#fde04747,#facc1573);color:#fefce8;text-shadow:0 0 12px rgba(15,23,42,.65);box-shadow:inset 0 0 0 1px #fde04773,0 10px 22px #fde0474d}.final-score__badge[hidden]{display:none}.final-score--record{border-color:#fde047a6;box-shadow:0 28px 60px #fde04747,0 0 0 1px #fde04761}.final-score--record .final-score__value{color:#fef08a}.dim-layer{position:absolute;top:0;right:0;bottom:0;left:0;z-index:1;pointer-events:none;opacity:0;transform:scale(.995);transition:opacity .18s ease-out,transform .36s cubic-bezier(.33,1,.68,1);will-change:opacity,transform;border-radius:inherit;overflow:hidden;contain:paint}.dim-layer.is-active{opacity:1;transform:scale(1)}.dim-layer--static{transition:opacity .12s ease-out;transform:none}.dim-layer__backdrop,.dim-layer__frost,.dim-layer__glow{position:absolute;top:-12%;right:-12%;bottom:-12%;left:-12%;border-radius:inherit;transform:translateZ(0)}.dim-layer__backdrop{top:-16%;right:-16%;bottom:-16%;left:-16%;background:#0c14286b;transform:translateZ(0) scale(1.08)}.dim-layer__frost{background:radial-gradient(120% 120% at 50% 20%,#ffffffbf,#fff6,#ffffff24 70%,#ffffff05);mix-blend-mode:screen;opacity:.65;transform:translateZ(0) scale(1.18);transition:transform .42s cubic-bezier(.33,1,.68,1)}.dim-layer.is-active .dim-layer__frost{transform:translateZ(0) scale(1.05)}.dim-layer__glow{top:-24%;right:-24%;bottom:-24%;left:-24%;background:radial-gradient(160% 160% at 20% 20%,#ffc85752,#ffc85700 65%),radial-gradient(140% 140% at 80% 30%,#78beff3d,#78beff00 70%);opacity:.55;transform:translateZ(0) scale(1.25);transition:transform .54s cubic-bezier(.22,1,.36,1)}.dim-layer.is-active .dim-layer__glow{transform:translateZ(0) scale(1.08)}@supports (backdrop-filter: blur(18px)){.dim-layer__backdrop{background:#0c142857;-webkit-backdrop-filter:blur(18px);backdrop-filter:blur(18px)}}@media (prefers-reduced-motion: reduce){.dim-layer,.dim-layer.is-active{transition:opacity .12s ease-out;transform:none}.dim-layer__frost,.dim-layer__glow,.dim-layer.is-active .dim-layer__frost,.dim-layer.is-active .dim-layer__glow{transition:none;transform:none}}
